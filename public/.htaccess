<IfModule mod_rewrite.c>
    RewriteEngine On

    # السماح بالوصول إلى الملفات داخل مجلد storage/
    RewriteCond %{REQUEST_URI} ^/storage/(.*)$ [NC]
    RewriteRule ^storage/(.*)$ /storage/$1 [L]

    # منع الوصول إلى الملفات الحساسة
    <FilesMatch "\.(env|log|json|sql|php|ini|bak|sh)$">
        Order Allow,Deny
        Deny from all
    </FilesMatch>

    # التأكد من أن الملفات والمجلدات الحقيقية لا يتم إعادة توجيهها
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f

    # إعادة توجيه جميع الطلبات إلى index.php
    RewriteRule ^ index.php [L]
</IfModule>
